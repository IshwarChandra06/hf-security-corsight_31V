<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head th:replace="mataheader :: headfragment">
</head>
<body>

<!-- Main Wrapper -->
	<div class="main-wrapper">
		<div th:replace="matatopmenu :: topmenufragment"> </div>
		<div th:replace="mataleftmenu :: leftmenu"></div>

	
	
	<!-- Page Wrapper -->
	<div class="page-wrapper">
			
				<!-- Page Content -->
				<div class="content container-fluid">
				
					<!-- Page Header -->
					<div class="page-header">
						<div class="row align-items-center">
							<div class="col">
								<h3 class="page-heaer"><i class="lab la-buysellads"> <b>Batch Step Execution</b></i></h3><br>
								<ul class="breadcrumb">
						        <li class="breadcrumb-item">Event</li>
						       <li class="breadcrumb-item active"><i class="lab la-buysellads"></i> Batch Step Execution</li>
								</ul>
							</div>
<!-- 							<div class="col-auto float-right ml-auto"> -->
<!-- 								<a th:href = "@{/action/new}" class="btn add-btn" ><i class="fa fa-plus"></i> Add Audit</a> -->
<!-- 							</div> -->
						</div>
					</div>
					<!-- /Page Header -->
					
					<div class="row">
						<div class="col-md-12">
							<div>
								<table id="table-data" class="table table-striped custom-table mb-0 datatable">
									<thead>
										<tr>
											<th>Step Execution Id</th>
											<th>Step Name</th>
<!-- 											<th>Job Instance Name</th> -->
											<th>Start Time</th>
											<th>End Time</th>
											<th>Status</th>
											<th>Commit Count</th>
											<th>Read Count</th>
											<th>Filter Count</th>
											<th>Write Count</th>
											<th>Read Skip Count</th>
                                            <th>Write Skip Count</th>
                                            <th>Process Skip Count</th>
                                            <th>Rollback Count</th>
											<th>Exit Code</th>
											<th>Exit Message</th>
										</tr>
									</thead>
								</table>
							</div>
						</div>
					</div>
                </div>
            </div>
		</div> 

	<div th:replace="matafooter :: footer"></div>
	
	<!-- Datatable JS -->
	<script src="/assets/js/jquery.dataTables.1.10.23.js"></script>
	<script src="/assets/js/dataTables.bootstrap4.min.js"></script>
	<script type="text/javascript" src="/assets/js/jquery.spring-friendly.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.18.1/moment.min.js"></script>
	<script  src="/assets/js/ellipsis.js"></script> 
	<script src="/assets/js/app.js"></script> 
	<script>
		$(document).ready(function() {
			var table = $('table#table-data').DataTable({
				'ajax' : '/api/batchstepexecution',
				'serverSide' : true,
				'scrollX':true,
				
				'columnDefs': [
					 { 'width': '50px', 'targets': 0 },
			            { 'width': '100px', 'targets': 1 ,'render': $.fn.dataTable.render.ellipsis(20)},
			            { 'width': '100px', 'targets': 2 ,'render': $.fn.dataTable.render.ellipsis(20)},
			            { 'width': '100px', 'targets': 3 ,'render': $.fn.dataTable.render.ellipsis(20)},
			            { 'width': '100px', 'targets': 4 ,'render': $.fn.dataTable.render.ellipsis(20)},
			            { 'width': '100px', 'targets': 5 ,'render': $.fn.dataTable.render.ellipsis(20)},
			            { 'width': '100px', 'targets': 6 ,'render': $.fn.dataTable.render.ellipsis(20)},
			            { 'width': '100px', 'targets': 7 ,'render': $.fn.dataTable.render.ellipsis(20)},
			            { 'width': '100px', 'targets': 8 ,'render': $.fn.dataTable.render.ellipsis(20)},
			            { 'width': '100px', 'targets': 9 ,'render': $.fn.dataTable.render.ellipsis(20)},
			            { 'width': '100px', 'targets': 10 ,'render': $.fn.dataTable.render.ellipsis(20)},
			            { 'width': '100px', 'targets': 11,'render': $.fn.dataTable.render.ellipsis(20)},
			            { 'width': '100px', 'targets': 12,'render': $.fn.dataTable.render.ellipsis(20)},
			            { 'width': '100px', 'targets': 13,'render': $.fn.dataTable.render.ellipsis(20)},
			            { 'width': '100px', 'targets': 14,'render': $.fn.dataTable.render.ellipsis(20)},
			          //  { 'width': '100px', 'targets': 15,'render': $.fn.dataTable.render.ellipsis(20)},
		        ],
				 columns : [
						{ data : 'stepExecutionId' }, 
						{ data : 'stepName'}, 
						//{ data : 'jobExecution.jobName'}, 
						{ data : 'startTime', type:'date', render: function(data){return moment(data, "YYYY-MM-DD'T'HH:mm:ss.SSS'Z'").format("YYYY-MM-DD HH:mm:ss");}  },  
						{ data : 'endTime', type:'date', render: function(data){return moment(data, "YYYY-MM-DD'T'HH:mm:ss.SSS'Z'").format("YYYY-MM-DD HH:mm:ss");}  }, 
						{ data : 'status'},
						{ data : 'commitCount'},
						{ data : 'readCount'}, 
						{ data : 'filterCount'},
						{ data : 'writeCount'},
						{ data : 'readSkipCount'}, 
						{ data : 'writeSkipCount'},
						{ data : "processSkipCount"},
						{ data : 'rollbackCount'},
						{ data : 'exitCode'}, 
						{ data : 'exitMessage'},
				]

			});
			$(".dataTables_filter").addClass("d-flex justify-content-end");
			$("#step_execution").addClass("active");
		});
	</script>
</body>
</html>
